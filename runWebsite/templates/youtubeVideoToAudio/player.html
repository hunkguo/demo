{% extends 'base.html' %}

{% block title %}
    {{title_name}}
{% endblock %}

{% block content %}


<div class="container">
    <div class="jumbotron">
        <h5 class="display-6">{{ self.title() }}</h5>
    </div> 
    <div class="row justify-content-md-center">     
        <div class="card" style="width: 18rem;">
            <div class="card-body">
              <p>
                <audio autoplay="autoplay" 
                    controls="controls"
                    preload="auto"
                    controlsList="nodownload" 
                    id="audio"
                    >
                    <source src="/static/media/{{ videofile }}" type="audio/mpeg">
                </audio>
              </p>
              <p>选择播放速率：<select id="selRate">
                <option value="0.5">0.5</option>
                <option value="1" selected>1.0</option>
                <option value="1.25">1.25</option>
                <option value="1.5">1.5</option>
                <option value="2">2.0</option>
            </select></p>
              <div class="row justify-content-md-left">
                <div class="col-md-auto">
                    <a href="#"  onclick="autoPlay()" class="btn btn-primary" >播放</a>
                </div>
                <div class="col-md-auto">
                    <a href="#"  onclick="closePlay()" class="btn btn-success" >关闭</a>
                </div>
                <div class="col-md-auto">
                    <a href="#"  onclick="task(10)" class="btn btn-info" >10分钟后关闭</a>
                </div>
                <div class="col-md-auto">
                    <a href="#"  onclick="task(20)" class="btn btn-warning" >20分钟后关闭</a>
                </div>
              </div>
              
            </div>
        </div>
    </div>
</div>







<script language="javascript" type="text/javascript">
    // 视频元素
    var audio = document.getElementById('audio');
    function autoPlay() {
        audio.play();
    }
    function closePlay() {
        audio.pause();
    }
    function task(t){
        autoPlay()
        setInterval(closePlay, t*60*1000)
    }

    var eleSelect = document.getElementById('selRate');
    // 改变播放速率
    eleSelect.addEventListener('change', function () {
        audio.playbackRate = this.value;
    })
</script>
{% endblock %}
